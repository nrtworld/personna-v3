<div class="notes-form">
  <div class="notes-header">
    <h4>Notes</h4>
    <button 
      class="btn btn-primary"
      (click)="showForm = !showForm"
      *ngIf="!showForm"
    >
      Ajouter une note
    </button>
  </div>

  <form 
    *ngIf="showForm"
    [formGroup]="noteForm" 
    (ngSubmit)="addNote()"
    class="note-editor"
  >
    <div class="form-group">
      <label for="noteTitle">Titre</label>
      <input 
        id="noteTitle"
        type="text"
        formControlName="title"
        class="form-control"
        [class.is-invalid]="noteForm.get('title')?.invalid && noteForm.get('title')?.touched"
      >
    </div>

    <div class="form-group">
      <label for="noteContent">Contenu</label>
      <textarea 
        id="noteContent"
        formControlName="content"
        class="form-control"
        rows="4"
        [class.is-invalid]="noteForm.get('content')?.invalid && noteForm.get('content')?.touched"
      ></textarea>
    </div>

    <div class="form-actions">
      <button 
        type="submit"
        class="btn btn-primary"
        [disabled]="noteForm.invalid"
      >
        {{ editingNote ? 'Modifier' : 'Ajouter' }}
      </button>
      <button 
        type="button"
        class="btn btn-outline-secondary"
        (click)="resetForm()"
      >
        Annuler
      </button>
    </div>
  </form>

  <div class="notes-list">
    <div *ngFor="let note of notes" class="note-item">
      <div class="note-content">
        <h5>{{ note.title }}</h5>
        <p>{{ note.content }}</p>
        <div class="note-meta">
          <small>Créée le {{ formatDate(note.createdAt) }}</small>
          <small *ngIf="note.updatedAt !== note.createdAt">
            (Modifiée le {{ formatDate(note.updatedAt) }})
          </small>
        </div>
      </div>
      <div class="note-actions">
        <button 
          class="btn btn-outline-primary btn-sm"
          (click)="editNote(note)"
        >
          Modifier
        </button>
        <button 
          class="btn btn-outline-danger btn-sm"
          (click)="deleteNote(note)"
        >
          Supprimer
        </button>
      </div>
    </div>
  </div>
</div> 